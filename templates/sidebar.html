<aside id="sidebar" class="w-20 bg-black flex flex-col p-4 space-y-4 flex-shrink-0 border-r border-gray-800 transition-all duration-300 ease-in-out h-screen sticky top-0 z-50 overflow-hidden group">
    
    <div class="relative h-24 w-full mb-2 flex-shrink-0">
        
        <div id="logoIcon" class="absolute inset-0 flex items-center justify-center z-20 transition-opacity duration-300">
            <img src="{{ url_for('static', filename='icon.png') }}" 
                 alt="Icono" 
                 class="h-10 w-auto block dark:hidden select-none">
            <img src="{{ url_for('static', filename='icon_alt.png') }}" 
                 alt="Icono Blanco" 
                 class="h-10 w-auto hidden dark:block select-none">
        </div>

        <div id="logoFull" class="absolute inset-0 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300 z-10">
            <img src="{{ url_for('static', filename='logo.png') }}" 
                 alt="Muxicos Logo" 
                 class="h-16 w-auto block dark:hidden select-none">
            <img src="{{ url_for('static', filename='logo_alt.png') }}" 
                 alt="Muxicos Logo Blanco" 
                 class="h-16 w-auto hidden dark:block select-none">
        </div>

    </div>
    
    <nav class="space-y-2 text-gray-400 text-sm font-medium flex-1 overflow-y-auto no-scrollbar w-full">
        
        <div class="space-y-1">
            <a href="/" class="flex items-center gap-4 hover:text-white p-3 rounded hover:bg-[#1E1E1E] transition overflow-hidden whitespace-nowrap" title="Home">
                <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ </span> 
                <span class="nav-text hidden font-semibold transition-opacity duration-200 opacity-0">Home</span>
            </a>
            
            <a href="/cursos" class="flex items-center gap-4 hover:text-white p-3 rounded hover:bg-[#1E1E1E] transition overflow-hidden whitespace-nowrap" title="Cursos">
                <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ“š</span> 
                <span class="nav-text hidden font-semibold transition-opacity duration-200 opacity-0">Cursos</span>
            </a>

            <a href="/biblioteca" class="flex items-center gap-4 hover:text-white p-3 rounded hover:bg-[#1E1E1E] transition overflow-hidden whitespace-nowrap" title="Mi Biblioteca">
                <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ“‚</span> 
                <span class="nav-text hidden font-semibold transition-opacity duration-200 opacity-0">Mi Biblioteca</span>
            </a>
        </div>

        <div class="pt-4 border-t border-gray-800 mt-4">
            <h3 class="nav-text hidden uppercase text-[10px] font-bold text-gray-600 mb-2 px-1 whitespace-nowrap overflow-hidden transition-opacity duration-200 opacity-0">
                Herramientas
            </h3>
            <a href="#" class="flex items-center gap-4 hover:text-white p-3 transition overflow-hidden whitespace-nowrap text-gray-400 hover:text-green-400">
                <span class="text-xl flex-shrink-0 w-6 text-center">â±ï¸</span> 
                <span class="nav-text hidden transition-opacity duration-200 opacity-0">MetrÃ³nomo</span>
            </a>
            <a href="#" class="flex items-center gap-4 hover:text-white p-3 transition overflow-hidden whitespace-nowrap text-gray-400 hover:text-green-400">
                <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ”Š</span> 
                <span class="nav-text hidden transition-opacity duration-200 opacity-0">Afinador</span>
            </a>
            <a href="#" class="flex items-center gap-4 hover:text-white p-3 transition overflow-hidden whitespace-nowrap text-gray-400 hover:text-green-400">
                <span class="text-xl flex-shrink-0 w-6 text-center">â­•</span> 
                <span class="nav-text hidden transition-opacity duration-200 opacity-0">CÃ­rculo Quintas</span>
            </a>
        </div>

        <div class="pt-4 border-t border-gray-800 mt-4">
            <h3 class="nav-text hidden uppercase text-[10px] font-bold text-gray-600 mb-2 px-1 whitespace-nowrap overflow-hidden transition-opacity duration-200 opacity-0">
                Comunidad
            </h3>
            <a href="#" class="flex items-center gap-4 hover:text-white p-3 transition overflow-hidden whitespace-nowrap">
                <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ’¬</span> 
                <span class="nav-text hidden transition-opacity duration-200 opacity-0">Foro / Discord</span>
            </a>
            <a href="#" class="flex items-center gap-4 hover:text-white p-3 transition overflow-hidden whitespace-nowrap">
                <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ“…</span> 
                <span class="nav-text hidden transition-opacity duration-200 opacity-0">Eventos en vivo</span>
            </a>
        </div>

        {% if usuario and usuario.rol == 'admin' %}
        <div class="pt-4 border-t border-gray-800 mt-4 w-full">
            <div class="bg-red-900/10 rounded-xl py-2 border border-red-900/30 overflow-hidden transition-all">
                <h3 class="nav-text hidden uppercase text-[10px] font-bold text-red-500 mb-2 px-3 whitespace-nowrap flex items-center gap-2 overflow-hidden transition-opacity duration-200 opacity-0">
                    <span>ğŸ›¡ï¸</span> <span>Admin Zone</span>
                </h3>
                <a href="/admin" class="flex items-center gap-4 text-red-200 hover:text-white hover:bg-red-900/50 p-3 transition overflow-hidden whitespace-nowrap mb-1">
                    <span class="text-xl flex-shrink-0 w-6 text-center">âš™ï¸</span> 
                    <span class="nav-text hidden transition-opacity duration-200 opacity-0">Panel Control</span>
                </a>
                <a href="/admin/usuarios" class="flex items-center gap-4 text-red-200 hover:text-white hover:bg-red-900/50 p-3 transition overflow-hidden whitespace-nowrap">
                    <span class="text-xl flex-shrink-0 w-6 text-center">ğŸ‘¥</span> 
                    <span class="nav-text hidden transition-opacity duration-200 opacity-0">Usuarios</span>
                </a>
            </div>
        </div>
        {% endif %}
    </nav>
</aside>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const sidebar = document.getElementById('sidebar');
        const logoFull = document.getElementById('logoFull');
        const logoIcon = document.getElementById('logoIcon');
        const navTexts = document.querySelectorAll('.nav-text');

        function expandSidebar() {
            sidebar.classList.remove('w-20');
            sidebar.classList.add('w-64');
            if(logoIcon) logoIcon.classList.add('opacity-0');
            if(logoFull) {
                logoFull.classList.remove('opacity-0', 'pointer-events-none');
                logoFull.classList.add('opacity-100');
            }
            navTexts.forEach(el => {
                el.classList.remove('hidden');
                setTimeout(() => el.classList.remove('opacity-0'), 100);
            });
        }

        function collapseSidebar() {
            sidebar.classList.remove('w-64');
            sidebar.classList.add('w-20');
            if(logoFull) {
                logoFull.classList.remove('opacity-100');
                logoFull.classList.add('opacity-0', 'pointer-events-none');
            }
            if(logoIcon) logoIcon.classList.remove('opacity-0');
            navTexts.forEach(el => {
                el.classList.add('opacity-0');
                setTimeout(() => el.classList.add('hidden'), 200); 
            });
        }

        sidebar.addEventListener('mouseenter', expandSidebar);
        sidebar.addEventListener('mouseleave', collapseSidebar);
    });
</script>